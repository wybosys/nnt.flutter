var __extends=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),nnt;!function(a){var b;!function(a){var b="nf20w",c=function(){function a(){}return a}();a.JsObject=c;var d=0,e=function(){function a(a,b,c){this.objectId=a,this.action=b,this.params=c}return a.prototype.serialize=function(){var a=JSON.stringify({o:this.objectId,i:this.id,a:this.action,p:this.params?this.params:{}});return a=encodeURI(a),b+"://"+a},a.prototype.unserialize=function(a){a=a.substr(b.length+3),a=decodeURI(a);var c=JSON.parse(a);this.objectId=c.o,this.id=c.i,this.action=c.a,this.params=c.p},a}();a.Message=e;var f={},g=function(){function a(){this._waitings={}}return a.prototype.addJsObj=function(a){return a.objectId?void(f[a.objectId]=a):void alert("添加没有从JsObject继承的对象")},a.prototype.fromApp=function(a){if(0!=a.indexOf(b))return void alert("收到了不支持的数据 "+a);var c=new e(0,null);c.unserialize(a);var d=f[c.objectId];return d?d[c.action]?void d[c.action](c.params):void alert("找不到动作 "+c.action):void alert("找不到对象 "+c.objectId)},a.prototype.toApp=function(a){var b=this;a.id=++d;var c=a.serialize(),e=new h(function(c,d){b._waitings[a.id]={resolve:c,reject:d}});return location.href=c,e},a.prototype.result=function(a){var b=new e(0,null);b.unserialize(a);var c=this._waitings[b.id];if(c){delete this._waitings[b.id];var d=b.params;d.ok?c.resolve(d.ok):c.reject(d.err)}else console.log("没有找到数据回调")},a}();a.jsb=new g;var h=function(){function a(a){var b=this;this._thens=[],this._catchs=[],this._executor=a,setTimeout(function(){b._do()},0)}return a.prototype.then=function(a){return this._thens.push(a),this},a.prototype["catch"]=function(a){return this._catchs.push(a),this},a.prototype._do=function(){var a=this;try{this._executor(function(b){a._thens.forEach(function(a){a(b)})},function(b){a._catchs.length?a._catchs.forEach(function(a){try{a(b)}catch(c){console.log(c)}}):console.log(b)})}catch(b){if(!this._catchs.length)throw b;this._catchs.forEach(function(a){a(b)})}},a}();a.Promise=h;var i=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return __extends(b,a),b.prototype.test=function(){return!1},b}(c);a._JsObject=i}(b=a.flutter||(a.flutter={}))}(nnt||(nnt={}));