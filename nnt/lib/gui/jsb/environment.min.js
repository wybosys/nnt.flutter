var __extends=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),nnt;!function(a){var b;!function(a){var b="nf20w",c=function(){function a(){}return a}();a.JsObject=c;var d=0,e=function(){function a(a,b,c){this.objectId=a,this.action=b,this.params=c}return a.prototype.serialize=function(){var a=JSON.stringify({o:this.objectId,i:this.id,a:this.action,p:this.params?this.params:{}});return a=encodeURI(a),b+"://"+a},a.prototype.unserialize=function(a){a=a.substr(b.length+3),a=decodeURI(a);var c=JSON.parse(a);this.objectId=c.o,this.id=c.i,this.action=c.a,this.params=c.p},a}();a.Message=e;var f;!function(a){a[a.UNKNOWN=-1e3]="UNKNOWN",a[a.EXCEPTION=-999]="EXCEPTION",a[a.ROUTER_NOT_FOUND=-998]="ROUTER_NOT_FOUND",a[a.CONTEXT_LOST=-997]="CONTEXT_LOST",a[a.MODEL_ERROR=-996]="MODEL_ERROR",a[a.PARAMETER_NOT_MATCH=-995]="PARAMETER_NOT_MATCH",a[a.NEED_AUTH=-994]="NEED_AUTH",a[a.TYPE_MISMATCH=-993]="TYPE_MISMATCH",a[a.FILESYSTEM_FAILED=-992]="FILESYSTEM_FAILED",a[a.FILE_NOT_FOUND=-991]="FILE_NOT_FOUND",a[a.ARCHITECT_DISMATCH=-990]="ARCHITECT_DISMATCH",a[a.SERVER_NOT_FOUND=-989]="SERVER_NOT_FOUND",a[a.LENGTH_OVERFLOW=-988]="LENGTH_OVERFLOW",a[a.TARGET_NOT_FOUND=-987]="TARGET_NOT_FOUND",a[a.PERMISSIO_FAILED=-986]="PERMISSIO_FAILED",a[a.WAIT_IMPLEMENTION=-985]="WAIT_IMPLEMENTION",a[a.ACTION_NOT_FOUND=-984]="ACTION_NOT_FOUND",a[a.TARGET_EXISTS=-983]="TARGET_EXISTS",a[a.STATE_FAILED=-982]="STATE_FAILED",a[a.UPLOAD_FAILED=-981]="UPLOAD_FAILED",a[a.MASK_WORD=-980]="MASK_WORD",a[a.SELF_ACTION=-979]="SELF_ACTION",a[a.PASS_FAILED=-978]="PASS_FAILED",a[a.OVERFLOW=-977]="OVERFLOW",a[a.AUTH_EXPIRED=-976]="AUTH_EXPIRED",a[a.SIGNATURE_ERROR=-975]="SIGNATURE_ERROR",a[a.FORMAT_ERROR=-974]="FORMAT_ERROR",a[a.CONFIG_ERROR=-973]="CONFIG_ERROR",a[a.PRIVILEGE_ERROR=-972]="PRIVILEGE_ERROR",a[a.LIMIT=-971]="LIMIT",a[a.PAGED_OVERFLOW=-970]="PAGED_OVERFLOW",a[a.NEED_ITEMS=-969]="NEED_ITEMS",a[a.IM_CHECK_FAILED=-899]="IM_CHECK_FAILED",a[a.IM_NO_RELEATION=-898]="IM_NO_RELEATION",a[a.SOCK_WRONG_PORTOCOL=-860]="SOCK_WRONG_PORTOCOL",a[a.SOCK_AUTH_TIMEOUT=-859]="SOCK_AUTH_TIMEOUT",a[a.SOCK_SERVER_CLOSED=-858]="SOCK_SERVER_CLOSED",a[a.THIRD_FAILED=-5]="THIRD_FAILED",a[a.MULTIDEVICE=-4]="MULTIDEVICE",a[a.HFDENY=-3]="HFDENY",a[a.TIMEOUT=-2]="TIMEOUT",a[a.FAILED=-1]="FAILED",a[a.OK=0]="OK"}(f=a.STATUS||(a.STATUS={}));var g={},h=function(){function a(){this._waitings={}}return a.prototype.addJsObj=function(a){return a.objectId?void(g[a.objectId]=a):void alert("添加没有从JsObject继承的对象")},a.prototype.fromApp=function(a){if(0!=a.indexOf(b))return void alert("收到了不支持的数据 "+a);var c=new e(0,null);c.unserialize(a);var d=g[c.objectId];return d?d[c.action]?void d[c.action](c.params):void alert("找不到动作 "+c.action):void alert("找不到对象 "+c.objectId)},a.prototype.toApp=function(a){var b=this;a.id=++d;var c=a.serialize(),e=new i(function(c,d){b._waitings[a.id]={resolve:c,reject:d}});return location.href=c,e},a.prototype.result=function(a){var b=new e(0,null);b.unserialize(a);var c=this._waitings[b.id];if(c){delete this._waitings[b.id];var d=b.params;d.ok?c.resolve(d.ok):c.reject(d.err)}else console.log("没有找到数据回调")},a}();a.jsb=new h;var i=function(){function a(a){var b=this;this._thens=[],this._catchs=[],this._executor=a,setTimeout(function(){b._do()},0)}return a.prototype.then=function(a){return this._thens.push(a),this},a.prototype["catch"]=function(a){return this._catchs.push(a),this},a.prototype._do=function(){var a=this;try{this._executor(function(b){a._thens.forEach(function(a){a(b)})},function(b){a._catchs.length?a._catchs.forEach(function(a){try{a(b)}catch(c){console.log(c)}}):console.log(b)})}catch(b){if(!this._catchs.length)throw b;this._catchs.forEach(function(a){a(b)})}},a}();a.Promise=i;var j=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return __extends(b,a),b.prototype.test=function(){return!1},b}(c);a._JsObject=j}(b=a.flutter||(a.flutter={}))}(nnt||(nnt={}));